---
import { Icon } from '@astrojs/starlight/components';
interface contentRow {
    topic: string,
    noClass: boolean,
    readings: string[],
    assignment: string,
    assignment_url: string,
    presentation_url: string,
    dates: classSession[]
};
interface classSession {
    date: Date,
    topic: string,
    assignment: string
};
const {content, unitOffset} = Astro.props;
import DayOfWeek from './DayOfWeek.astro';
import LabMarker from './LabMarker.astro';
import ReadingAssignments from './ReadingAssignments.astro';
---
<div class = "table-container">
    <table width='100%'>
        <thead>
            <tr>
                <td>Date</td>
                <td>Topic</td>
                
            </tr>
        </thead>
        <tbody>
        {content.map((entry:contentRow) => (
            <tr class = "schedule-week"><td colspan = 3>Week {content.indexOf(entry) + unitOffset}</td></tr>
            <tr>
                <td colspan = 1><Icon name = "information" /></td>
                <td colspan = 2>
                    {entry.topic}
                </td>
            </tr>

            <!-- Empty if flag set for noClass -->

            {!entry.noClass ? 
                <!-- Reading assignments -->
                <ReadingAssignments readings={entry.readings} />
                <!-- Reading assignments -->

                <tr>
                    <td colspan = 1><Icon name = "approve-check" /></td>
                    <td colspan = 2>
                        <a href = {entry.assignment_url} target = "_blank">{!entry.noClass && entry.assignment}</a>
                    </td>
                </tr>
                <tr>
                    <td colspan = 1><Icon name = "seti:notebook" /></td>
                    <td colspan = 2>
                        <a href = {entry.presentation_url}>{!entry.noClass && "Slides"}</a>
                    </td>
                </tr>

                <!-- Rows for dates only -->
                {!entry.noClass && entry.dates.map((session:classSession) => (
                    <tr>
                        <td><DayOfWeek date = {session.date}/></td>
                        <td><LabMarker status = {session.lab}/>{session.topic}</td>
                        <td>{session.assignment}</td>
                    </tr>
                ))}
                <!-- Rows for dates only -->
            : ""}

            <!-- Empty if flag set for noClass -->
        ))}
        </tbody>
    </table>
</div>